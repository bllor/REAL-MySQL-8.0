ch04

4.1.1
mysql서버는 사람의 머리를 담당하는 mysql엔진과 손발 역할을 담당하는 스토리지 엔진으로 구분할 수 있습니다.

mysql엔진
- 클라이언트로부터의 접속 및 쿼리 요청을 처리하는 커넥션 핸들러, sql파서, 전처리기, 옵티마이저가 여기에 속한다.

스토리지 엔진
요청된 sql문장을 분석하거나 최적화하는 등 DBMS의 두뇌에 해당하는 처리를 수행하고,
실제 데이터를 디스크 스토리지(데이터가 저장된 곳)에 저장하거나 디스크 스토리지로부터 데이터를 읽어오는 부분을 담당

핸들러 API
mysql 엔진의 쿼리 실행기에서 데이터를 쓰거나 읽어야 할 때 각 스토리지 엔진에 쓰기 또는 읽기 요청을 하는 api


4.1.2
mysql서버는 프로세스 기반이 아니라 스레드 기반으로 작동한다.
포그라운드 스레드에서는 데이터를 mysql의 데이터 버퍼나 캐시로부터 가져오며, 버퍼나 캐시에 없는 경우에는
직접 디스크의 데이터나 인덱스 파일로부터 데이터를 읽어와서 작업을 처리한다.
백그라운드 스레드에서는 로그 스레드, 버퍼의 데이터를 디스크로 내려쓰는 작업을 처리하는 쓰기스레드,
인서트 버퍼를 병합하는 스레드 등의 작업을 한다.


4.1.3
mysql에서 사용되는 메모리 공간은 크게 글로벌 메모리 영역과 로컬 메모리 영역으로 구분된다.
글로벌 메모리 영역은 스레드의 수와 무관하게 하나의 메모리 공간만 할당된다.
테이블 캐시, innoDB버퍼풀, innoDB 리두 로그 버퍼 등이 이에 속한다.

로컬 메모리 영역은 세션 메모리 영역이라고도 표현하며, mysql 서버상에 존재하는 클라이언트 스레드가 쿼리를 처리하는데
사용하는 메모리 영역이다.
로컬 메모리는 각 클라이언트 스레드별로 독립적으로 할당되며 절대 공유되어 사용되지 않는다는 특징을 가지고 있다.

